(function(a,i,o){a.log=a.log||a.noop;a.ui=a.ui||{};a.ui.log={failingOver:function(b,c,d){a.log(b,["Failing over",d])},requestStarted:function(b,c){a.log(b,["Requesting "+c+"..."])},requestComplete:function(b,c){a.log(b,[c+" request complete"])},timerStart:function(b,c,d){a.log(b,["Starting timer for",c,":",d+"ms"])},timedOut:function(b,c){a.log(b,[c+" request timed out"])},updating:function(b,c,d){a.log(b,["Updating",d])}};var p=i.document,m=i.decodeURIComponent,j=i.encodeURIComponent,f=function(b){return typeof b===
"string"?b&&b.split(","):a.makeArray(b)},n=function(b,c,d){if(b&&b.indexOf("?")!==-1){b=b.split("?")[1];for(var e=0,g=c.length;e<g;e++){var h=b.indexOf(c[e]);if(h!==-1){h=h+c[e].length+1;var k=b.indexOf("&",h);k=k===-1?b.length:k;d.call(i,c[e],b.substring(h,k))}}}},l=function(){a.log("ui",arguments)};a.ui.elementVal=function(b,c){b=f(b);for(var d=0,e=b.length;d<e;d++)if(b[d]){var g=a("#"+b[d]);(g=g.length?g.val():o)&&g.toLowerCase()!=="null"&&c.call(i,b[d],g)}};a.ui.locationVal=function(b,c){var d=
{};b=f(b);c=c||function(e,g){if(b.length>1)d[e]=g;else d=g};b.length&&n(i.location.search,b,function(e,g){c.call(i,e,g)});return d};a.ui.personaVal=function(b,c,d){b=f(b);if(b.length){var e=a.personaCookie();e&&a.each(b,function(g,h){if(h==="uratc"||h==="rwdb")(d=d||a.ui.scriptVarVal("AI")||a.ui.scriptVarVal("ai")||a.ui.locationVal("AI")||a.ui.locationVal("ai"))&&e.accounts[d]&&c.call(i,h,e.accounts[d][h]);else c.call(i,h,e[h])})}};a.ui.referrerVal=function(b,c){b=f(b);b.length&&n(p.referrer||"",
b,function(d,e){c.call(i,d,e)})};a.ui.scriptVarVal=function(b,c,d){var e={};b=f(b);c=c||function(g,h){if(b.length>1)e[g]=h;else e=h};if(b.length){d=d||i;a.each(b,function(g,h){c.call(d,h,i[h])})}return e};a.ui.initPlacements=function(b,c,d){a.isFunction(a.fn[c])&&a(b).each(function(e){var g=a(this),h="#"+g.attr("id"),k=h.substring(1)||c+"-"+e;if(g.data(c))k=g.data(c).options.pid||k;else g[c]({pid:k});l("Initializing",k,":",c,"ad",h);g.attr("data-pid",k);d&&d.call(this,k,e)})};a.ui.getPlacement=function(b){return a('[data-pid="'+
b+'"]')};a.ui.getPageData=function(b,c){var d={},e=c||function(g,h){if(h!==o&&d[g]===o)d[g]=h};a.ui.elementVal(b.elementData||"",e);a.ui.locationVal(b.locationData||"",e);a.ui.referrerVal(b.referrerData||"",e);a.ui.scriptVarVal(b.scriptVarData||"",e);a.ui.personaVal(b.personaData||"",e);return d};a.ui.urlDecode=function(b){return m(b.replace(/\+/g," "))};a.ui.urlEncode=function(b){return j(b.replace(/\s/g,"+"))}})(jQuery,this);(function(a,i,o,p){a.log=a.log||a.noop;a.ui=a.ui||{};var m=function(){a.log("ui",arguments)};a.each(a.ui.log,function(j){m[j]=function(){var f=Array.prototype.slice.call(arguments,0);f.unshift("Remote content");f.unshift("ui");a.ui.log[j].apply(a.ui.log,f)}});a.ajax.RemoteContent=function(j){j=a.extend(true,{},{data:{},dataType:"jsonp",traditional:true,url:"/GetContent"},j);return a.ajax(j)};a.ui.RemoteContentService=function(j){this.options=a.extend({},{ajax:{data:{}},data:{},failover:false,failoverParam:"default",
timeout:4},j);this._init=function(){var f=this.options,n=f.timeout*1E3,l=a.ui.locationVal(f.failoverParam)==="true"||f.failover,b=function(){m.timedOut();l=true;o(f.timerId);a.event.trigger("viewTimeout",[{data:f.data}])},c=a.extend(true,f.ajax,{complete:function(){if(!l){m.requestComplete();o(f.timerId);delete f.timerId;a.event.trigger("viewUpdate",[{data:f.data}])}},success:function(g){a.extend(true,f.data,g)}}),d=[],e=[];a.each(f.data,function(g,h){if(h&&h.cid){d.push(g);e.push(h.cid)}});if(d.length&&
e.length){a.extend(c,{data:{pid:d,cid:e}});f.timerId=p(b,n);m.timerStart(n);if(!l){m.requestStarted();a.ajax.RemoteContent(c)}}else{l=true;a.event.trigger("viewTimeout",[{data:f.data}])}};this._init()};a.ui.LocalContentService=function(j){this.options=a.extend({},{creativesContainer:"#creatives",data:{},errorText:"[an error occurred while processing this directive]"},j);this._init=function(){var f=this.options,n=a(f.creativesContainer);a.each(f.data,function(l,b){if(b&&b.cid){var c=b.cid,d=a.trim(n.find('[data-cid="'+
c+'"]').children().first().text());if(d&&d!==f.errorText)f.data[l].view=d;else d===f.errorText?a.log({category:"ui",level:"warn",message:["Targeted creative failed to load for cid:",c]}):a.log({category:"ui",level:"warn",message:["No targeted creative found for cid:",c]})}});a.event.trigger("viewUpdate",[{data:f.data}])};this._init()}})(jQuery,this,this.clearTimeout,this.setTimeout);